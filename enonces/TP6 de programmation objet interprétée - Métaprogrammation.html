<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>TP6 de programmation objet interprétée - Métaprogrammation</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="TPs mis à disposition le plus simplement possible pour mes étudiants.">
    <link rel="canonical" href="https://berlin.iut.local/%7Efrdelobe/ruby-2a/2019/03/11/TP6_ruby/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="TP6%20de%20programmation%20objet%20interpr%C3%A9t%C3%A9e%20-%20M%C3%A9taprogrammation_files/main.css">

</head>


  <body class="ruby-2a">

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="http://berlin.iut.local/%7Efrdelobe/">Supports de cours pour l'IUT</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
        </svg>
      </a>
      <div class="trigger">
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/about/">About</a>
        
          
        
          
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/categories/ruby-2a/">ruby-2a</a>
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/categories/cpp-2a/">cpp-2a</a>
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>TP6 de programmation objet interprétée - Métaprogrammation</h1>
    <p class="meta">Mar 11, 2019</p>
  </header>

  <article class="post-content">
  <h2 id="1---rappels-du-cours---ne-sautez-pas-cette-étape">1 - Rappels du cours - Ne sautez pas cette étape</h2>
<p>Étudiez l’exemple présent dans le fichier <a href="http://berlin.iut.local/%7Efrdelobe/Data/exemple_chat.rb">exemple_chat.rb</a>
 que vous pouvez exécuter pour valider ce qui est avancé dans les 
commentaires. (exécutez le, modifiez le mais surtout, comprenez le !)
  <strong>Avis aux filous :</strong> Si vous sautez cette étape, on vous fera flageller avec des orties.</p>

<h2 id="2---entrée-en-matière---générateur-de-getter-et-de-setter">2 - Entrée en matière - Générateur de getter et de setter</h2>
<p>Améliorez la classe <em>Object</em> avec deux nouvelles méthodes de classe attr_getter et attr_setter qui
  fonctionnent comme respectivement comme attr_reader et attr_writer.
  <strong>Indice :</strong> regardez les méthodes Object#instance_variable_get et Object#instance_variable_set
  dans la documentation.
  <strong>Avis aux filous :</strong> Ne pas utiliser d’alias.</p>

<p>Pour rappel un getter et un setter d’âge (#age) s’écriront :</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">age</span>
      <span class="vi">@age</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">age</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="vi">@age</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">end</span>

</code></pre></div></div>

<h2 id="3----yac---yet-another-creature">3 -  YAC - Yet Another Creature</h2>
<p>Testez vos méthodes attr_getter et attr_setter dans une classe Creature qui aura un nom (<strong>#nom</strong>) et
  des points de vie (<strong>#pv</strong>). Nommez bien les méthodes comme indiqué.</p>

<p>Ensuite ajoutez les méthodes suivantes sur la classe Créature :</p>
<ul>
  <li><strong>#tanker(degats)</strong> : Cette méthode simule une armure
 ou une esquive et permet de retourner les dégats qu’encaissera 
réellement une créature lorsqu’elle aura se fera attaquer
Par défaut sur la créature, cette méthode renvoie les dégats tels quels.</li>
  <li><strong>#encaisser(degats)</strong> : Cette méthode de faire en 
sorte que la créature tank les dégats grâce à la méthode #tanker et 
soustrait des pv de la créature la valeur de retour de ce qu’elle aura 
tanké.</li>
  <li><strong>#force</strong> : Cette méthode renvoie la force d’une attaque de la créature.
  Par défaut sur la créature, cette méthode renvoie 1.</li>
  <li><strong>#frapper(other_creature)</strong> : Cette méthode fait en sorte qu’une créature en frappe une autre et lui fait encaisser sa force physique.</li>
  <li><strong>#mort?</strong> : Cette méthode renvoie vrai si la créature a des pv &lt;= 0</li>
</ul>

<h2 id="4---yaml---génération-de-classes">4 - YAML - Génération de classes</h2>
<p>Lisez le fichier <a href="http://berlin.iut.local/%7Efrdelobe/Data/creatures.yml">creatures.yml</a> qui définit des sous classes de créatures et leur manière de calculer leur force et leur façon de tanker.
  <strong>Indice :</strong> Pour parser ce fichier, utilisez YAML.load(string) (consulter la documentation).</p>

<p>Pour chacune des sous classes de créature décrite :</p>
<ul>
  <li>Créer une sous classe de créature</li>
  <li>Associer la constante qui correspond à son nom à son object</li>
  <li>Redéfinir ses méthodes #tanker(degats) et #force suivant la 
description du fichier (attention à la prise d’arguments pour tanker)</li>
</ul>

<p>Testez en bricolant des sous classes de créatures chargées du fichier.</p>

<h2 id="5---round-one-fight">5 - Round one, fight!</h2>
<p>Ecrivez un module Arene qui dispose d’une méthode de classe <strong>#duel_a_mort(nom, dueliste_1, dueliste_2)</strong>
  qui affiche le nom du combat, fait combattre les deux créatures 
duelistes et affiche le vainqueur et ses points de vie restant.</p>

<h2 id="6---yet-another-yaml---instanciation-de-créatures">6 - Yet Another YAML - Instanciation de créatures</h2>
<p>Lisez le fichier <a href="http://berlin.iut.local/%7Efrdelobe/Data/duels.yml">duels.yml</a>, pour chacun des combats décrits, instanciez les bonnes créatures et faites les combattre dans l’arène !</p>

  </article>

</div>
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrap">

    <!--    <h2 class="footer-heading">Supports de cours pour l'IUT</h2> -->

    <div class="footer-col-1 column">
      <ul>
        <li>Supports de cours pour l'IUT</li>
        <li><a href="mailto:francois.delobel@uca.fr">francois.delobel@uca.fr</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        
        
      </ul>
    </div>

    <div class="footer-col-3 column">
      <p class="text">TPs mis à disposition le plus simplement possible pour mes étudiants.</p>
    </div>

  </div>

</footer>


    

</body></html>