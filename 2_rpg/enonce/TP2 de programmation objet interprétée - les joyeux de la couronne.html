<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>TP2 de programmation objet interprétée - les joyeux de la couronne</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="TPs mis à disposition le plus simplement possible pour mes étudiants.">
    <link rel="canonical" href="https://berlin.iut.local/%7Efrdelobe/ruby-2a/2019/02/04/TP2_ruby/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="TP2%20de%20programmation%20objet%20interpr%C3%A9t%C3%A9e%20-%20les%20joyeux%20de%20la%20couronne_files/main.css">

</head>


  <body class="ruby-2a">

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="http://berlin.iut.local/%7Efrdelobe/">Supports de cours pour l'IUT</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
        </svg>
      </a>
      <div class="trigger">
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/about/">About</a>
        
          
        
          
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/categories/cpp-PM/">cpp-PM</a>
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/categories/ruby-2a/">ruby-2a</a>
        
          <a class="page-link" href="http://berlin.iut.local/%7Efrdelobe/categories/cpp-2a/">cpp-2a</a>
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>TP2 de programmation objet interprétée - les joyeux de la couronne</h1>
    <p class="meta">Feb 4, 2019</p>
  </header>

  <article class="post-content">
  <h1 id="les-joyeux-de-la-couronne">Les joyeux de la couronne</h1>

<p>Ce TP a pour but de vous faire pratiquer les bases du langage Ruby, en particulier :</p>

<ul>
  <li>Classes, héritage, construction, attributs, méthodes</li>
  <li>Continuer à utiliser Hash et Map</li>
</ul>

<h2 id="loutil-du-jour">L’outil du jour</h2>

<ul>
  <li><code class="highlighter-rouge">rubocop</code> est un vérificateur de syntaxe et de style Ruby. Usage classique: <code class="highlighter-rouge">rubocop programme.rb</code>. D’autres option,s sont aussi très utiles, à vous de chercher.</li>
</ul>

<h2 id="préliminaires">Préliminaires</h2>

<h3 id="creature">Creature</h3>

<p>Créez une classe <code class="highlighter-rouge">Creature</code> dotée:</p>

<ul>
  <li>d’un nom</li>
  <li>d’un nombre de points de vie</li>
  <li>d’une méthode <code class="highlighter-rouge">encaisser(degats)</code> qui enlève des pv</li>
  <li>d’une méthode <code class="highlighter-rouge">to_s</code> pour la conversion en texte</li>
  <li>d’une méthode <code class="highlighter-rouge">soigner(pv)</code> qui ajoute pv au nombre de points de vie de la créature.</li>
</ul>

<p>Testez!</p>

<h3 id="troll">Troll</h3>

<p>Créez une classe <code class="highlighter-rouge">Troll</code> qui hérite de <code class="highlighter-rouge">Creature</code>.</p>

<h3 id="gobelin">Gobelin</h3>

<p>Créez une classe Gobelin qui hérite de Creature. La méthode <code class="highlighter-rouge">encaisser</code>
 de Gobelin enlève a ses points de vie la moitié des dégâts (le gobelin 
est vif, agile, et difficile à viser car de petite taille).</p>

<h3 id="la-compagnie">La compagnie</h3>

<p>Un groupe de gobelins et de trolls (les <em>joyeux de la couronne</em>)
 visite le donjon de Rhaalduck, célèbre soit disant pour ses nombreux 
trésors riches en pierre précieuses. Les couloirs de ce sinistre 
bâtiment ne permettent qu’un passage en file indienne.</p>

<ul>
  <li>Créez une classe <code class="highlighter-rouge">Compagnie</code> pour stocker un groupe d’aventuriers.</li>
  <li>Dotez la des méthodes permettant d’ajouter des créatures. Interdisez les homonimies en lançant une exception.</li>
  <li>Ajoutez à ce groupe les Creatures suivantes:
    <ul>
      <li>Gruk est un troll. Il a 27pv</li>
      <li>Grok est le petit frère de Gruk. Il n’a que 24pv</li>
      <li>Zak est un gobelin. Il a 12pv</li>
      <li>Zog n’est pas le frère de Zak mais c’est un gobelin quand même. Il a 13pv</li>
    </ul>
  </li>
  <li>Créez une méthode qui permet d’afficher la compagnie</li>
</ul>

<h2 id="lexploration">L’exploration</h2>

<p>Pour la suite des questions, dotez votre compagnie d’une méthode <code class="highlighter-rouge">exploration</code>, appelant éventuellement d’autres méthodes, qui simule les actions suivantes. Votre code doit être court et joli.</p>

<p><strong>Note</strong>: Quand on dit, par exemple, “Zak encaisse”, 
vous devez retrouvez Zak grâce à votre algorithme, pas le calculer sa 
position à la main!</p>

<ol>
  <li>Le premier personnage pose le pied sur une dalle de couleur différente des autres et encaisse 10 dégats.</li>
  <li>Comment gérer les morts? Modifiez vos classes pour que la mort 
d’une créature prévienne automatiquement son groupe (pour qu’il la 
supprime).</li>
  <li>Le groupe décide alors de faire passer Zak en tête afin de servir d’éclaireur (il passe devant, pas de permutation).</li>
  <li>Gruk, blessé, échange sa place avec son frère.</li>
  <li>Une trappe s’ouvre sous les pieds du deuxième personnage (le 
gobelin de tête étant trop léger pour activer le piège). Celui-ci 
encaisse 14 dégats.</li>
  <li>Le groupe trouve une potion de soins et la fait boire à celui qui a le moins de points de vie (+5pv).</li>
  <li>Au détour d’un couloir mal éclairé, la première créature marche 
sur une rune étrange sournoisement dissimulée sous un tapis. le groupe 
entier encaisse 10 dégats mais s’embrase de façon très esthétique.</li>
  <li>Alerté par le bruit de l’explosion, le grand et vil Zangdar 
s’approche et leur lance une malédiction de Kozysar (petit démon du 
troisième cercle). Ce sort a un effet compliqué: envoyé contre un 
groupe, il infliger 15% du total des PV du groupe à <strong>chacun</strong> des membres du groupe.</li>
  <li>Le groupe compte-il des survivants? En tous cas, il s’organise alors par ordre décroissant de PV, et charge!</li>
  <li>Le groupe arrive enfin a portée de massue de Zangdar. Celui ci 
lance successivement cinq rayons lunaires qui viennent tour à tour 
frapper le premier du groupe, lui infligeant 5 points de dégats par 
rayon. Si celui-ci meurt, il est supprimé et remplacé naturellement par 
lesuivant. Zangdar fait un échec critique après le cinquième sort lancé 
et se bannit tout seul dans les limbes.</li>
  <li>Combien reste-il de survivants?</li>
  <li>Combien de créatures ont plus de 3PV?</li>
</ol>

<h2 id="pour-ceux-qui-ont-fini">Pour ceux qui ont fini</h2>

<h3 id="lecture-de-fichier">Lecture de fichier</h3>

<ul>
  <li>Créez un fichier texte avec une liste de personnages de la forme Espèce, Nom, PV</li>
  <li>Créez une fabrique de compagnie qui prend en paramètre un nom de fichier, et fabrique la compagnie en question.</li>
</ul>

<h2 id="installation-de-rubocop">Installation de <code class="highlighter-rouge">Rubocop</code></h2>

<p>Pour installer la gemme qui contient <code class="highlighter-rouge">Rubocop</code>, vous pouvez utiliser:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install --user-install rubocop
</code></pre></div></div>

<p>Notez bien les mofifications à votre <code class="highlighter-rouge">PATH</code> que vous proposera <code class="highlighter-rouge">gem</code>.</p>

<p>Utilisation de Rubocop:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rubocop fichier.rb
</code></pre></div></div>

<p>Si vous voulez corriger les choses triviales (après avoir vérifié)</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rubocop -a fichier.rb
</code></pre></div></div>

  </article>

</div>
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrap">

    <!--    <h2 class="footer-heading">Supports de cours pour l'IUT</h2> -->

    <div class="footer-col-1 column">
      <ul>
        <li>Supports de cours pour l'IUT</li>
        <li><a href="mailto:francois.delobel@uca.fr">francois.delobel@uca.fr</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        
        
      </ul>
    </div>

    <div class="footer-col-3 column">
      <p class="text">TPs mis à disposition le plus simplement possible pour mes étudiants.</p>
    </div>

  </div>

</footer>


    

</body></html>